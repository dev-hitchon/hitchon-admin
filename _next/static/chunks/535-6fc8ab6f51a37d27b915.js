(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{6669:function(e,t,n){"use strict";var r=n(9756),i=n(2122),o=n(7294),c=(n(5697),n(1410)),u=n(8681),a=n(9050),s=n(5953),l=n(9612),d=n(2049),f=n(5893);const p=["component","direction","spacing","divider","children"];function h(e,t){const n=o.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,i)=>(e.push(r),i<n.length-1&&e.push(o.cloneElement(t,{key:`separator-${i}`})),e)),[])}function v({values:e,base:t}){const n=Object.keys(t);if(0===n.length)return e;let r;return n.reduce(((t,n)=>(t[n]="object"===typeof e?null!=e[n]?e[n]:e[r]:e,r=n,t)),{})}const b=(0,l.ZP)("div",{name:"Stack"})((({styleProps:e,theme:t})=>{let n=(0,i.Z)({display:"flex"},(0,c.k9)({theme:t},e.direction,(e=>({flexDirection:e}))));if(e.spacing){const r=(0,u.hB)(t),i=Object.keys(t.breakpoints.values).reduce(((t,n)=>(null==e.spacing[n]&&null==e.direction[n]||(t[n]=!0),t)),{}),o=v({values:e.direction,base:i}),a=v({values:e.spacing,base:i}),l=(t,n)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${i=n?o[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,u.NA)(r,t)}};var i};n=(0,s.Z)(n,(0,c.k9)({theme:t},a,l))}return n})),y=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiStack"}),o=(0,a.Z)(n),{component:c="div",direction:u="column",spacing:s=0,divider:l,children:v}=o,y=(0,r.Z)(o,p),g={direction:u,spacing:s};return(0,f.jsx)(b,(0,i.Z)({as:c,styleProps:g,ref:t},y,{children:l?h(v,l):v}))}));t.Z=y},6372:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),i=n(7757),o=n.n(i),c=n(6156),u=n(2137),a=n(6112),s=n(8610),l=n(7294),d=n(4699),f=n(6829),p=n(1324);var h=n(2465);function v(){var e=(0,h.Z)(["\n    query NoticesCount($where: NoticeWhereInput) {\n        noticesCount(where: $where)\n    }\n"]);return v=function(){return e},e}var b=(0,n(3121).ZP)(v());var y=n(4433),g=n(6531),w=n(3150),Z=n(4468);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t,n,i=(0,g.Z)(),c=function(){var e=(0,f.useLazyQuery)(p.l),t=(0,d.Z)(e,2);return{fetchNotices:t[0],fetchResult:t[1]}}(),h=c.fetchNotices,v=c.fetchResult,m=function(){var e=(0,f.useLazyQuery)(b,{fetchPolicy:"cache-and-network"}),t=(0,d.Z)(e,2);return{fetchNoticesCount:t[0],fetchResult:t[1]}}(),j=m.fetchNoticesCount,x=m.fetchResult,O=(0,l.useState)(0),C=O[0],S=O[1],P=(0,l.useState)(10),N=P[0],$=P[1],A=(0,l.useState)(e.selected),B=A[0],I=A[1],E=function(){var t=(0,u.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j({variables:{where:k({},e.where)}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=(0,u.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h({variables:{where:k({},e.where),orderBy:e.orderBy,skip:C*N,take:N}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){M(),E()}),[]),(0,y.Z)({timeout:200,dependencies:[C,N],onTimeout:function(){M(),E()}});(0,l.useEffect)((function(){var t;null===(t=e.onSelectedChange)||void 0===t||t.call(e,B)}),[B]),(0,l.useEffect)((function(){I(e.selected)}),[e.selected]);var R=(0,l.useState)(!1),D=R[0],W=R[1],_=(0,l.useState)(),q=_[0],L=_[1];return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(w.Z,{onClickRow:function(t){if(e.disableMultiSelect)I([t]);else{var n=B.findIndex((function(e){return e.id===t.id})),r=[];-1===n?r=r.concat(B,t):0===n?r=r.concat(B.slice(1)):n===B.length-1?r=r.concat(B.slice(0,-1)):n>0&&(r=r.concat(B.slice(0,n),B.slice(n+1))),I(r)}},maxHeight:i.height-170,columns:[{id:"id",label:"",format:function(e,t){return(0,r.jsx)(s.Z,{onClick:function(){return function(e){L(e),W(!0)}(t)},children:"\uc218\uc815"})}},{id:"title",label:"\uc81c\ubaa9"},{id:"body",label:"\ubcf8\ubb38",format:function(e){return"".concat(e.slice(0,2),"...")}},{id:"createdAt",label:"\uc0dd\uc131\uc77c\uc790",minWidth:200,format:function(e){return new Date(e).toString()}},{id:"updatedAt",label:"\uc218\uc815\uc77c\uc790",minWidth:200,format:function(e){return new Date(e).toString()}}],rows:null===(t=v.data)||void 0===t?void 0:t.admin_notices,paginationMod:{totalCount:(null===x||void 0===x||null===(n=x.data)||void 0===n?void 0:n.noticesCount)||0,page:C,rowsPerPage:N,onPageChange:function(e,t){S(t)},onRowsPerPageChange:function(e){$(parseInt(e.target.value,10)),S(0)}},checkMod:{selected:e.selected||B,setSelected:I,disableMultiSelect:e.disableMultiSelect}}),(0,r.jsx)(Z.Z,{open:D,setOpen:W,notice:q})]})}},4468:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),i=n(7757),o=n.n(i),c=n(2137),u=n(800),a=n(1492),s=n(3769),l=n(9326),d=n(6886),f=n(1166),p=n(8610),h=n(7294),v=n(5925),b=n(4699),y=n(6829),g=n(2465);function w(){var e=(0,g.Z)(["\n    mutation UpsertNotice($where: NoticeWhereUniqueInput!, $create: NoticeCreateInput!, $update: NoticeUpdateInput!) {\n        upsertNotice(where: $where, create: $create, update: $update) {\n            id\n            title\n            body\n            createdAt\n            updatedAt\n        }\n    }\n"]);return w=function(){return e},e}var Z=(0,n(3121).ZP)(w()),m=n(1324);var k=n(6531);function j(e){var t,n,i,g,w,j,x=function(){return e.setOpen(!1)},O=(0,h.useState)(null===(t=e.notice)||void 0===t?void 0:t.title),C=O[0],S=O[1],P=(0,h.useState)(null===(n=e.notice)||void 0===n?void 0:n.body),N=P[0],$=P[1],A=function(){var e=(0,y.useMutation)(Z,{refetchQueries:[{query:m.l,variables:{where:{},orderBy:[{createdAt:"desc"}],skip:0,take:10}}]});return{upsertNotice:(0,b.Z)(e,1)[0]}}().upsertNotice,B=(0,v.Z)(),I=B.showMessage,E=B.Snack,M=(0,k.Z)();(0,h.useEffect)((function(){var t,n;e.notice&&(S(null===(t=e.notice)||void 0===t?void 0:t.title),$(null===(n=e.notice)||void 0===n?void 0:n.body))}),[e.notice]);var R=function(){var t=(0,c.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C&&0!==C.length&&N&&0!==N.length&&0!==N[0].length){t.next=3;break}return I("\ub0b4\uc6a9\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694"),t.abrupt("return");case 3:return t.next=5,A({variables:{where:{id:(null===e||void 0===e||null===(n=e.notice)||void 0===n?void 0:n.id)||""},create:{title:C,body:{set:N}},update:{title:{set:C},body:{set:N}}}});case 5:x();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=(null===(i=e.notice)||void 0===i?void 0:i.title)===C&&(null===(g=e.notice)||void 0===g?void 0:g.body.toString())===(null===N||void 0===N?void 0:N.toString());return(0,r.jsxs)(u.Z,{fullWidth:!0,open:e.open,onClose:x,children:[(0,r.jsx)(a.Z,{children:(0,r.jsx)(s.Z,{fullWidth:!0,defaultValue:(null===(w=e.notice)||void 0===w?void 0:w.title)||"",label:"\uc81c\ubaa9",onChange:function(e){S(e.target.value)}})}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(d.Z,{style:{width:"100%",minHeight:M.height/2},placeholder:"\ubcf8\ubb38 (\uac1c\ud589\uc73c\ub85c \ub2e8\ub77d\uc774 \uad6c\ubcc4\ub429\ub2c8\ub2e4)",defaultValue:null===(j=e.notice)||void 0===j?void 0:j.body.reduce((function(e,t,n){return 0===n?t:e+"\n\n"+t}),""),onChange:function(e){var t=e.target.value.split(/\n\n/);t=t.map((function(e){var t=/\n/.exec(e);return console.log(t),e})),$(t)}})}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(p.Z,{onClick:x,children:"\ub2eb\uae30"}),e.notice?(0,r.jsx)(p.Z,{disabled:D,onClick:R,variant:"contained",children:"\uc218\uc815"}):(0,r.jsx)(p.Z,{disabled:D,onClick:R,variant:"contained",children:"\uc0dd\uc131"})]}),(0,r.jsx)(E,{})]})}},1324:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(2465);function i(){var e=(0,r.Z)(["\n    query Admin_notices($where: NoticeWhereInput, $orderBy: [NoticeOrderByInput], $skip: Int, $take: Int) {\n        admin_notices(where: $where, orderBy: $orderBy, skip: $skip, take: $take) {\n            id\n            title\n            body\n            createdAt\n            updatedAt\n        }\n    }\n"]);return i=function(){return e},e}var o=(0,n(3121).ZP)(i())}}]);