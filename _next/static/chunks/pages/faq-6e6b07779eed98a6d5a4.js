(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{6669:function(e,n,t){"use strict";var r=t(9756),i=t(2122),a=t(7294),o=(t(5697),t(1410)),c=t(8681),u=t(9050),s=t(5953),l=t(9612),d=t(2049),f=t(5893);const h=["component","direction","spacing","divider","children"];function p(e,n){const t=a.Children.toArray(e).filter(Boolean);return t.reduce(((e,r,i)=>(e.push(r),i<t.length-1&&e.push(a.cloneElement(n,{key:`separator-${i}`})),e)),[])}function v({values:e,base:n}){const t=Object.keys(n);if(0===t.length)return e;let r;return t.reduce(((n,t)=>(n[t]="object"===typeof e?null!=e[t]?e[t]:e[r]:e,r=t,n)),{})}const y=(0,l.ZP)("div",{name:"Stack"})((({styleProps:e,theme:n})=>{let t=(0,i.Z)({display:"flex"},(0,o.k9)({theme:n},e.direction,(e=>({flexDirection:e}))));if(e.spacing){const r=(0,c.hB)(n),i=Object.keys(n.breakpoints.values).reduce(((n,t)=>(null==e.spacing[t]&&null==e.direction[t]||(n[t]=!0),n)),{}),a=v({values:e.direction,base:i}),u=v({values:e.spacing,base:i}),l=(n,t)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${i=t?a[t]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,c.NA)(r,n)}};var i};t=(0,s.Z)(t,(0,o.k9)({theme:n},u,l))}return t})),w=a.forwardRef((function(e,n){const t=(0,d.Z)({props:e,name:"MuiStack"}),a=(0,u.Z)(t),{component:o="div",direction:c="column",spacing:s=0,divider:l,children:v}=a,w=(0,r.Z)(a,h),g={direction:c,spacing:s};return(0,f.jsx)(y,(0,i.Z)({as:o,styleProps:g,ref:n},w,{children:l?p(v,l):v}))}));n.Z=w},5777:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(5893),i=t(7757),a=t.n(i),o=t(2137),c=t(7427),u=t(7624),s=t(6669),l=t(8610),d=t(7294),f=t(9018),h=t(6156),p=t(6112),v=t(4699),y=t(6829),w=t(2465),g=t(3121);function b(){var e=(0,w.Z)(["\n    query Admin_faqs($where: FaqWhereInput, $orderBy: [FaqOrderByInput], $skip: Int, $take: Int) {\n        admin_faqs(where: $where, orderBy: $orderBy, skip: $skip, take: $take) {\n            id\n            title\n            body\n            createdAt\n            updatedAt\n        }\n    }\n"]);return b=function(){return e},e}var Z=(0,g.ZP)(b());function q(){var e=(0,w.Z)(["\n    query FaqsCount($where: FaqWhereInput) {\n        faqsCount(where: $where)\n    }\n"]);return q=function(){return e},e}var m=(0,g.ZP)(q());var k=t(4433),j=t(6531),x=t(3150),P=t(800),C=t(1492),O=t(3769),S=t(9326),F=t(6886),$=t(1166),_=t(5925);function A(){var e=(0,w.Z)(["\n    mutation UpsertFaq($where: FaqWhereUniqueInput!, $create: FaqCreateInput!, $update: FaqUpdateInput!) {\n        upsertFaq(where: $where, create: $create, update: $update) {\n            id\n            title\n            body\n            createdAt\n            updatedAt\n        }\n    }\n"]);return A=function(){return e},e}var B=(0,g.ZP)(A());function E(e){var n,t,i,c,u,s=function(){return e.setOpen(!1)},f=(0,d.useState)(null===(n=e.faq)||void 0===n?void 0:n.title),h=f[0],p=f[1],w=(0,d.useState)((function(){var n;return null===(n=e.faq)||void 0===n?void 0:n.body})),g=w[0],b=w[1],q=function(){var e=(0,y.useMutation)(B,{refetchQueries:[{query:Z,variables:{where:{},orderBy:[{createdAt:"desc"}],skip:0,take:10}}]});return{upsertFaq:(0,v.Z)(e,1)[0]}}().upsertFaq,m=(0,_.Z)(),k=m.showMessage,x=m.Snack,A=(0,j.Z)();(0,d.useEffect)((function(){var n,t;e.faq&&(p(null===(n=e.faq)||void 0===n?void 0:n.title),b(null===(t=e.faq)||void 0===t?void 0:t.body))}),[e.faq]);var E=function(){var n=(0,o.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h&&0!==h.length&&g&&0!==g.length&&0!==g[0].length){n.next=3;break}return k("\ub0b4\uc6a9\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694"),n.abrupt("return");case 3:return n.next=5,q({variables:{where:{id:(null===e||void 0===e||null===(t=e.faq)||void 0===t?void 0:t.id)||""},create:{title:h,body:{set:g}},update:{title:{set:h},body:{set:g}}}});case 5:s();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=(null===(t=e.faq)||void 0===t?void 0:t.title)===h&&(null===(i=e.faq)||void 0===i?void 0:i.body.toString())===(null===g||void 0===g?void 0:g.toString());return(0,r.jsxs)(P.Z,{fullWidth:!0,open:e.open,onClose:s,children:[(0,r.jsx)(C.Z,{children:(0,r.jsx)(O.Z,{fullWidth:!0,defaultValue:(null===(c=e.faq)||void 0===c?void 0:c.title)||"",label:"\uc81c\ubaa9",onChange:function(e){p(e.target.value)}})}),(0,r.jsx)(S.Z,{children:(0,r.jsx)(F.Z,{style:{width:"100%",minHeight:A.height/2},placeholder:"\ubcf8\ubb38 (\uac1c\ud589\uc73c\ub85c \ub2e8\ub77d\uc774 \uad6c\ubcc4\ub429\ub2c8\ub2e4)",defaultValue:null===(u=e.faq)||void 0===u?void 0:u.body.reduce((function(e,n,t){return 0===t?n:e+"\n\n"+n}),""),onChange:function(e){var n=e.target.value.split(/\n\n/);n=n.map((function(e){var n=/\n/.exec(e);return console.log(n),e})),b(n)}})}),(0,r.jsxs)($.Z,{children:[(0,r.jsx)(l.Z,{onClick:s,children:"\ub2eb\uae30"}),e.faq?(0,r.jsx)(l.Z,{disabled:I,onClick:E,variant:"contained",children:"\uc218\uc815"}):(0,r.jsx)(l.Z,{disabled:I,onClick:E,variant:"contained",children:"\uc0dd\uc131"})]}),(0,r.jsx)(x,{})]})}function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,h.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function R(e){var n,t,i=(0,j.Z)(),c=function(){var e=(0,y.useLazyQuery)(Z),n=(0,v.Z)(e,2);return{fetchFaqs:n[0],fetchResult:n[1]}}(),u=c.fetchFaqs,s=c.fetchResult,f=function(){var e=(0,y.useLazyQuery)(m,{fetchPolicy:"cache-and-network"}),n=(0,v.Z)(e,2);return{fetchFaqsCount:n[0],fetchResult:n[1]}}(),h=f.fetchFaqsCount,w=f.fetchResult,g=(0,d.useState)(0),b=g[0],q=g[1],P=(0,d.useState)(10),C=P[0],O=P[1],S=(0,d.useState)(e.selected),F=S[0],$=S[1],_=function(){var n=(0,o.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h({variables:{where:D({},e.where)}});case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),A=function(){var n=(0,o.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u({variables:{where:D({},e.where),orderBy:e.orderBy,skip:b*C,take:C}});case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,d.useEffect)((function(){A(),_()}),[]),(0,k.Z)({timeout:200,dependencies:[b,C],onTimeout:function(){A(),_()}});(0,d.useEffect)((function(){var n;null===(n=e.onSelectedChange)||void 0===n||n.call(e,F)}),[F]),(0,d.useEffect)((function(){$(e.selected)}),[e.selected]);var B=(0,d.useState)(!1),I=B[0],R=B[1],W=(0,d.useState)(),N=W[0],M=W[1];return(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(x.Z,{onClickRow:function(e){var n=F.findIndex((function(n){return n.id===e.id})),t=[];-1===n?t=t.concat(F,e):0===n?t=t.concat(F.slice(1)):n===F.length-1?t=t.concat(F.slice(0,-1)):n>0&&(t=t.concat(F.slice(0,n),F.slice(n+1))),$(t)},maxHeight:i.height-170,columns:[{id:"id",label:"",format:function(e,n){return(0,r.jsx)(l.Z,{onClick:function(){return function(e){M(e),R(!0)}(n)},children:"\uc218\uc815"})}},{id:"title",label:"\uc81c\ubaa9"},{id:"body",label:"\ubcf8\ubb38",format:function(e){return"".concat(e.slice(0,2),"...")}},{id:"createdAt",label:"\uc0dd\uc131\uc77c\uc790",minWidth:200,format:function(e){return new Date(e).toString()}},{id:"updatedAt",label:"\uc218\uc815\uc77c\uc790",minWidth:200,format:function(e){return new Date(e).toString()}}],rows:null===(n=s.data)||void 0===n?void 0:n.admin_faqs,paginationMod:{totalCount:(null===w||void 0===w||null===(t=w.data)||void 0===t?void 0:t.faqsCount)||0,page:b,rowsPerPage:C,onPageChange:function(e,n){q(n)},onRowsPerPageChange:function(e){O(parseInt(e.target.value,10)),q(0)}},checkMod:{selected:e.selected||F,setSelected:$}}),(0,r.jsx)(E,{open:I,setOpen:R,faq:N})]})}var W=t(5275),N=t(8329);function M(){var e=(0,w.Z)(["\n    mutation DeleteFaq($where: FaqWhereUniqueInput!) {\n        deleteFaq(where: $where) {\n            id\n        }\n    }\n"]);return M=function(){return e},e}var Q=(0,g.ZP)(M());function T(e){var n=(0,d.useState)([]),t=n[0],i=n[1],h=(0,d.useState)(!1),p=h[0],w=h[1],g=function(){var e=(0,y.useMutation)(Q,{refetchQueries:[{query:Z,variables:{where:{},orderBy:[{createdAt:"desc"}],skip:0,take:10}}]});return{deleteFaq:(0,v.Z)(e,1)[0]}}().deleteFaq,b=function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(null===t||void 0===t?void 0:t.map(function(){var e=(0,o.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{where:{id:n.id}}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:i([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)(W.Z,{Navigation:(0,r.jsx)(f.ZP,{title:"\uc790\uc8fc\ubb3b\ub294\uc9c8\ubb38\uad00\ub9ac",position:"sticky",actionComponent:(0,r.jsx)(f.v2,{})}),children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(u.ZP,{disableGutters:!0,children:(0,r.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(l.Z,{onClick:function(){return w(!0)},color:"primary",variant:"outlined",children:"\uc790\uc8fc\ubb3b\ub294\uc9c8\ubb38\uc791\uc131"}),(0,r.jsxs)(l.Z,{disabled:0===t.length,onClick:b,color:"secondary",variant:"".concat(t.length>0?"contained":"outlined"),children:[t.length,"\uac1c \uc790\uc8fc\ubb3b\ub294\uc9c8\ubb38\uc0ad\uc81c"]})]})}),(0,r.jsx)(R,{orderBy:[{createdAt:N.As.Desc}],selected:t,onSelectedChange:i}),(0,r.jsx)(E,{open:p,setOpen:w})]})})}},4307:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/faq",function(){return t(5777)}])}},function(e){e.O(0,[680,34,123,223,254,735,788,774,888,179],(function(){return n=4307,e(e.s=n);var n}));var n=e.O();_N_E=n}]);