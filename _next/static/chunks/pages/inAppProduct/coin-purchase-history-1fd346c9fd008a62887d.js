(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{234:function(n,e,t){"use strict";t.d(e,{Z:function(){return l}});var r=t(5893),o=t(1915),u=t(8693),i=t(8265),c=t(3399),a=[{key:"coinBundleGiftReason",label:"\uc9c0\uae09 \uc0ac\uc720",format:function(n){var e;return(0,c.L)(null===n||void 0===n||null===(e=n.coinBundleGift)||void 0===e?void 0:e.reason)}},{key:"coinCount",label:"\uc9c0\uae09 \uac1c\uc218",format:function(n){return"".concat(n.coinCount,"\uac1c")}},{key:"purchasedAt",label:"\uc9c0\uae09 \uc77c\uc790",format:function(n){return new Date(n.purchasedAt).toString()}},{key:"user",label:"\uc9c0\uae09 \ud68c\uc6d0",format:function(n){var e,t,r;return"".concat(null===n||void 0===n||null===(e=n.user)||void 0===e||null===(t=e.activeProfile)||void 0===t?void 0:t.nickname,"(").concat(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.phoneNum,")")}},{key:"coinBundleGiftAdmin",label:"\uc9c0\uae09\uad00\ub9ac\uc790",format:function(n){var e,t;return(null===n||void 0===n||null===(e=n.coinBundleGift)||void 0===e||null===(t=e.admin)||void 0===t?void 0:t.phoneNum)||"\uc2dc\uc2a4\ud15c \uc790\ub3d9 \uc9c0\uae09"}},{key:"coinBundleGiftOldUser",label:"\uae30\uc874 \uc720\uc800",format:function(n){var e,t,r;return null===n||void 0===n||null===(e=n.coinBundleGift)||void 0===e||null===(t=e.recommend)||void 0===t||null===(r=t.oldUser)||void 0===r?void 0:r.phoneNum}},{key:"coinBundleGiftNewUser",label:"\uc2e0\uaddc \uc720\uc800",format:function(n){var e,t,r;return null===n||void 0===n||null===(e=n.coinBundleGift)||void 0===e||null===(t=e.recommend)||void 0===t||null===(r=t.newUser)||void 0===r?void 0:r.phoneNum}}];function l(n){(0,u.Z)();var e=(0,i.Z)({query:o.l,variables:{where:n.where},dataKey:"admin_coinBundlePurchases",headers:n.forGift?a:[{key:"coinCount",label:"\uad6c\ub9e4 \uac1c\uc218",format:function(n){return"".concat(n.coinCount,"\uac1c")}},{key:"purchasedAt",label:"\uad6c\ub9e4 \uc77c\uc790",format:function(n){return new Date(n.purchasedAt).toString()}},{key:"user",label:"\uad6c\ub9e4 \ud68c\uc6d0",format:function(n){var e,t,r;return"".concat(null===n||void 0===n||null===(e=n.user)||void 0===e||null===(t=e.activeProfile)||void 0===t?void 0:t.nickname,"(").concat(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.phoneNum,")")}},{key:"product",label:"\uad6c\ub9e4 \uc0c1\ud488",format:function(n){var e,t;return"".concat(null===(e=n.product)||void 0===e?void 0:e.title,"(").concat(null===(t=n.product)||void 0===t?void 0:t.store,")")}},{key:"wasDiscounted",label:"\ud560\uc778\uc5ec\ubd80",format:function(n){return n.wasDiscounted?"\ud560\uc778\uc0c1\ud488":"\ubbf8\ud560\uc778\uc0c1\ud488"}},{key:"cost",label:"\uad6c\ub9e4 \ube44\uc6a9",format:function(n){return n.cost.toLocaleString()}},{key:"currency",label:"\ud1b5\ud654",format:function(n){return n.currency}}]}).DownloadButton;return(0,r.jsx)(e,{label:n.label})}},1915:function(n,e,t){"use strict";t.d(e,{l:function(){return u}});var r=t(2465);function o(){var n=(0,r.Z)(["\n    query Admin_coinBundlePurchases($where: CoinBundlePurchaseWhereInput, $orderBy: [CoinBundlePurchaseOrderByInput], $skip: Int, $take: Int) {\n        admin_coinBundlePurchases(where: $where, orderBy: $orderBy, skip: $skip, take: $take) {\n            id\n            coinCount\n            user {\n                id\n                phoneNum\n                activeProfile {\n                    id\n                    nickname\n                }\n            }\n            product {\n                id\n                store\n                title\n            }\n            createdAt\n            purchasedAt\n            wasDiscounted\n            cost\n            currency\n            isGift\n            coinBundleGift {\n                id\n                reason\n                desc\n                admin {\n                    id\n                    phoneNum\n                }\n                recommend {\n                    id\n                    newUser {\n                        id\n                        phoneNum\n                        activeProfile {\n                            id\n                            nickname\n                        }\n                    }\n                    oldUser {\n                        id\n                        phoneNum\n                        activeProfile {\n                            id\n                            nickname\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]);return o=function(){return n},n}var u=(0,t(3121).ZP)(o())},4948:function(n,e,t){"use strict";t.d(e,{Z:function(){return i}});var r=t(4699),o=t(6829),u=t(1915);function i(){var n=(0,o.useLazyQuery)(u.l),e=(0,r.Z)(n,2);return{fetchCoinBundlePurchases:e[0],fetchResult:e[1]}}},8693:function(n,e,t){"use strict";t.d(e,{Z:function(){return c}});var r=t(6829),o=t(2465);function u(){var n=(0,o.Z)(["\n    query CfHost {\n        cfHost\n    }\n"]);return u=function(){return n},n}var i=(0,t(3121).ZP)(u());function c(){return(0,r.useQuery)(i)}},5932:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(4699),o=t(6829),u=t(2465);function i(){var n=(0,u.Z)(["\n    query CoinBundlePurchasesCount($where: CoinBundlePurchaseWhereInput) {\n        coinBundlePurchasesCount(where: $where)\n    }\n"]);return i=function(){return n},n}var c=(0,t(3121).ZP)(i());function a(){var n=(0,o.useLazyQuery)(c,{fetchPolicy:"cache-and-network"}),e=(0,r.Z)(n,2);return{fetchPurchasesCount:e[0],fetchResult:e[1]}}},8265:function(n,e,t){"use strict";t.d(e,{Z:function(){return f}});var r=t(5893),o=t(6156),u=t(6829),i=t(8610),c=t(9552),a=t(5925),l=t(7294),s=t(3461);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function f(n){var e=(0,u.useQuery)(n.query,{variables:n.variables}),t=e.data,f=e.loading,v=(e.error,e.networkStatus,e.called,(0,l.useState)(!1)),h=v[0],p=v[1],m=(0,a.Z)(),y=(m.showMessage,m.Snack);(0,l.useEffect)((function(){p(!(f||!t))}),[t,f]);return{DownloadButton:function(e){var u;return(0,r.jsxs)(i.Z,{variant:"contained",disabled:!h,children:[h?(0,r.jsx)(s.CSVLink,{headers:n.headers,data:(null===t||void 0===t||null===(u=t[n.dataKey])||void 0===u?void 0:u.map((function(e){return n.headers.reduce((function(n,t,r){var u=t.format(e);return n[t.key]=u,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n)}),{})})))||"",filename:"".concat((new Date).toLocaleString(),".csv"),target:"_blank",children:e.label}):(0,r.jsx)(c.Z,{}),(0,r.jsx)(y,{})]})}}}},3099:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Z}});var r=t(5893),o=t(7757),u=t.n(o),i=t(6156),c=t(2137),a=t(6112),l=t(5022),s=t(3769),d=t(7294),f=t(4948),v=t(5932),h=t(4433),p=t(6531),m=t(3150),y=t(234);function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function w(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function P(n){var e,t,o,i=(0,p.Z)(),b=(0,f.Z)(),P=b.fetchCoinBundlePurchases,k=b.fetchResult,g=(0,v.Z)(),j=g.fetchPurchasesCount,O=g.fetchResult,Z=(0,d.useState)(0),B=Z[0],C=Z[1],N=(0,d.useState)(10),x=N[0],D=N[1],S=(0,d.useState)(""),_=S[0],G=S[1],A=function(){var e=(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j({variables:{where:w(w({},n.where),{},{isGift:{equals:!1},wallet:_&&_.length>0?{user:{phoneNum:{contains:_}}}:void 0})}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P({variables:{where:w(w({},n.where),{},{isGift:{equals:!1},wallet:_&&_.length>0?{user:{phoneNum:{contains:_}}}:void 0}),orderBy:n.orderBy,skip:B*x,take:x}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){E(),A()}),[]),(0,h.Z)({timeout:"200",dependencies:[B,x,_],onTimeout:function(){E(),A()}}),(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(l.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(s.Z,{focused:!0,variant:"standard",label:"\ud68c\uc6d0 \ud734\ub300\uc804\ud654 \ubc88\ud638",onChange:function(n){return G(n.target.value)}}),(0,r.jsx)(y.Z,{where:w(w({},n.where),{},{isGift:{equals:!1},wallet:_&&_.length>0?{user:{phoneNum:{contains:_}}}:void 0}),label:"".concat((null===O||void 0===O||null===(e=O.data)||void 0===e?void 0:e.coinBundlePurchasesCount)||0,"\uac74 \ub2e4\uc6b4\ub85c\ub4dc"),forGift:!1})]}),(0,r.jsx)(m.Z,{maxHeight:i.height-170,columns:[{id:"coinCount",label:"\uad6c\ub9e4 \uac1c\uc218",format:function(n){return"".concat(n,"\uac1c")}},{id:"purchasedAt",label:"\uad6c\ub9e4 \uc77c\uc790",minWidth:200,format:function(n){return new Date(n).toString()}},{id:"user",label:"\uad6c\ub9e4 \ud68c\uc6d0",format:function(n){var e;return"".concat(null===n||void 0===n||null===(e=n.activeProfile)||void 0===e?void 0:e.nickname,"(").concat(null===n||void 0===n?void 0:n.phoneNum,")")}},{id:"product",label:"\uad6c\ub9e4 \uc0c1\ud488",format:function(n){return"".concat(n.title,"(").concat(n.store,")")}},{id:"wasDiscounted",label:"\ud560\uc778\uc5ec\ubd80",format:function(n){return n?"\ud560\uc778\uc0c1\ud488":"\ubbf8\ud560\uc778\uc0c1\ud488"}},{id:"cost",label:"\uad6c\ub9e4 \ube44\uc6a9",format:function(n){return n.toLocaleString()}},{id:"currency",label:"\ud1b5\ud654"}],rows:null===(t=k.data)||void 0===t?void 0:t.admin_coinBundlePurchases,paginationMod:{totalCount:(null===O||void 0===O||null===(o=O.data)||void 0===o?void 0:o.coinBundlePurchasesCount)||0,page:B,rowsPerPage:x,onPageChange:function(n,e){C(e)},onRowsPerPageChange:function(n){D(parseInt(n.target.value,10)),C(0)}}})]})}var k=t(9018),g=t(5925),j=t(5275),O=t(8329);function Z(n){var e=(0,g.Z)(),t=(e.showMessage,e.Snack);return(0,r.jsxs)(j.Z,{Navigation:(0,r.jsx)(k.ZP,{title:"\uacb0\uc81c\uad00\ub9ac - \ucf54\uc778\uc720\ub8cc\uacb0\uc81c\ub0b4\uc5ed",position:"sticky",actionComponent:(0,r.jsx)(k.v2,{})}),children:[(0,r.jsx)(P,{orderBy:[{purchasedAt:O.As.Desc}]}),(0,r.jsx)(t,{})]})}},3399:function(n,e,t){"use strict";t.d(e,{L:function(){return o}});var r=t(8329);function o(n){switch(n){case r.yL.Admin:return"\uad00\ub9ac\uc790 \uc99d\uc815";case r.yL.UserRecommend:return"\uc2e0\uaddc \uc720\uc800 \ucd08\ub300"}}},8717:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inAppProduct/coin-purchase-history",function(){return t(3099)}])}},function(n){n.O(0,[680,34,123,223,710,735,788,774,888,179],(function(){return e=8717,n(n.s=e);var e}));var e=n.O();_N_E=e}]);