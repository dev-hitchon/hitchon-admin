(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{8265:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(5893),o=t(6156),a=t(6829),i=t(8610),u=t(9552),c=t(5925),s=t(7294),l=t(3461);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){var n=(0,a.useQuery)(e.query,{variables:e.variables}),t=n.data,f=n.loading,v=(n.error,n.networkStatus,n.called,(0,s.useState)(!1)),h=v[0],p=v[1],y=(0,c.Z)(),b=(y.showMessage,y.Snack);(0,s.useEffect)((function(){p(!(f||!t))}),[t,f]);return{DownloadButton:function(n){var a;return(0,r.jsxs)(i.Z,{variant:"contained",disabled:!h,children:[h?(0,r.jsx)(l.CSVLink,{headers:e.headers,data:(null===t||void 0===t||null===(a=t[e.dataKey])||void 0===a?void 0:a.map((function(n){return e.headers.reduce((function(e,t,r){var a=t.format(n);return e[t.key]=a,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e)}),{})})))||"",filename:"".concat((new Date).toLocaleString(),".csv"),target:"_blank",children:n.label}):(0,r.jsx)(u.Z,{}),(0,r.jsx)(b,{})]})}}}},9848:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=t(5893),o=t(9018),a=t(5925),i=t(5275),u=t(8329),c=t(7757),s=t.n(c),l=t(6156),d=t(2137),f=t(6112),v=t(5022),h=t(3769),p=t(7294),y=t(4699),b=t(6829),g=t(2465),w=t(3121);function j(){var e=(0,g.Z)(["\n    query Admin_coinUsages($where: CoinUsageWhereInput, $orderBy: [CoinUsageOrderByInput], $skip: Int, $take: Int) {\n        admin_coinUsages(where: $where, orderBy: $orderBy, skip: $skip, take: $take) {\n            id\n            user {\n                id\n                phoneNum\n                activeProfile {\n                    id\n                    nickname\n                }\n            }\n            coinCount\n            usedAt\n            desc\n        }\n    }\n"]);return j=function(){return e},e}var O=(0,w.ZP)(j());function m(){var e=(0,g.Z)(["\n    query CoinUsagesCount($where: CoinUsageWhereInput) {\n        coinUsagesCount(where: $where)\n    }\n"]);return m=function(){return e},e}var k=(0,w.ZP)(m());var P=t(4433),C=t(6531),Z=t(3150),x=t(8265);function _(e){var n=(0,x.Z)({query:O,variables:{where:e.where},dataKey:"admin_coinUsages",headers:[{key:"usedAt",label:"\uc0ac\uc6a9 \uc2dc\uac01",format:function(e){return e.usedAt}},{key:"user",label:"\uc0ac\uc6a9 \ud68c\uc6d0",format:function(e){var n,t,r;return"".concat(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(t=n.activeProfile)||void 0===t?void 0:t.nickname,"(").concat(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.phoneNum,")")}},{key:"desc",label:"\ub0b4\uc5ed",format:function(e){return null===e||void 0===e?void 0:e.desc}},{key:"coinCount",label:"\uc0ac\uc6a9 \uac1c\uc218",format:function(e){return"".concat(e.coinCount,"\uac1c")}}]}).DownloadButton;return(0,r.jsx)(n,{label:e.label})}function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(e){var n,t,o,a=(0,C.Z)(),i=function(){var e=(0,b.useLazyQuery)(O,{fetchPolicy:"cache-and-network"}),n=(0,y.Z)(e,2);return{fetchCoinUsages:n[0],fetchResult:n[1]}}(),u=i.fetchCoinUsages,c=i.fetchResult,l=function(){var e=(0,b.useLazyQuery)(k,{fetchPolicy:"cache-and-network"}),n=(0,y.Z)(e,2);return{fetchUsagesCount:n[0],fetchResult:n[1]}}(),g=l.fetchUsagesCount,w=l.fetchResult,j=(0,p.useState)(0),m=j[0],x=j[1],U=(0,p.useState)(10),D=U[0],N=U[1],E=(0,p.useState)(""),$=E[0],B=E[1],A=function(){var n=(0,d.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:g({variables:{where:S(S({},e.where),{},{wallet:$&&$.length>0?{user:{phoneNum:{contains:$}}}:void 0})}});case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){var n=(0,d.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u({variables:{where:S(S({},e.where),{},{wallet:$&&$.length>0?{user:{phoneNum:{contains:$}}}:void 0}),orderBy:e.orderBy,skip:m*D,take:D}});case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,p.useEffect)((function(){I(),A()}),[]),(0,P.Z)({timeout:"200",dependencies:[m,D,$],onTimeout:function(){I(),A()}}),(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(v.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(h.Z,{variant:"standard",focused:!0,label:"\ud68c\uc6d0 \ud734\ub300\uc804\ud654 \ubc88\ud638",onChange:function(e){return B(e.target.value)}}),(0,r.jsx)(_,{where:S(S({},e.where),{},{wallet:$&&$.length>0?{user:{phoneNum:{contains:$}}}:void 0}),label:"".concat((null===w||void 0===w||null===(n=w.data)||void 0===n?void 0:n.coinUsagesCount)||0," \uac74 \ub2e4\uc6b4\ub85c\ub4dc")})]}),(0,r.jsx)(Z.Z,{maxHeight:a.height-170,columns:[{id:"usedAt",label:"\uc0ac\uc6a9 \uc2dc\uac01"},{id:"user",label:"\uc0ac\uc6a9 \ud68c\uc6d0",format:function(e){var n;return"".concat(null===e||void 0===e||null===(n=e.activeProfile)||void 0===n?void 0:n.nickname,"(").concat(null===e||void 0===e?void 0:e.phoneNum,")")}},{id:"desc",label:"\ub0b4\uc5ed"},{id:"coinCount",label:"\uc0ac\uc6a9 \uac1c\uc218",format:function(e){return"".concat(e,"\uac1c")}}],rows:null===(t=c.data)||void 0===t?void 0:t.admin_coinUsages,paginationMod:{totalCount:(null===w||void 0===w||null===(o=w.data)||void 0===o?void 0:o.coinUsagesCount)||0,page:m,rowsPerPage:D,onPageChange:function(e,n){x(n)},onRowsPerPageChange:function(e){N(parseInt(e.target.value,10)),x(0)}}})]})}function N(e){var n=(0,a.Z)(),t=(n.showMessage,n.Snack);return(0,r.jsxs)(i.Z,{Navigation:(0,r.jsx)(o.ZP,{title:"\uacb0\uc81c\uad00\ub9ac - \ucf54\uc778\uc0ac\uc6a9\ub0b4\uc5ed",position:"sticky",actionComponent:(0,r.jsx)(o.v2,{})}),children:[(0,r.jsx)(D,{orderBy:[{usedAt:u.As.Desc}]}),(0,r.jsx)(t,{})]})}},9348:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inAppProduct/coin-usage-history",function(){return t(9848)}])}},function(e){e.O(0,[680,34,123,223,710,735,788,774,888,179],(function(){return n=9348,e(e.s=n);var n}));var n=e.O();_N_E=n}]);